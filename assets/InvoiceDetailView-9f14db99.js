import{A as g,b as m,B as Ye,D as ee,G as ye,H as Ge,I as A,J as Ee,K as he,L as ue,M as ie,N as T,O as Te,d as q,P as Me,Q as ce,R as Xe,S as ne,r as Ve,T as Ze,V as et,W as ve,X as tt,Y as ot,Z as nt,$ as ae,a0 as be,F as Q,a1 as de,a2 as pe,a3 as lt,a4 as ke,a5 as it,a6 as J,a7 as Y,a8 as W,a9 as Se,aa as at,h as st,v as j,j as L,ab as G,o as C,g as F,l as H,f as R,ac as Pe,c as N,i as ge,ad as Z,t as U,ae as $e,e as X,af as rt,_ as le,ag as ut,ah as dt,ai as ct,y as Ie,w as xe,aj as vt,n as De,ak as pt,p as mt,s as ft,al as ht,am as bt,an as gt}from"./index-74e51854.js";import{a as xt,b as yt,c as St}from"./useInvoice-78544a6b.js";import{_ as me}from"./BaseButton.vue_vue_type_script_setup_true_lang-5c24a895.js";import{o as _e}from"./onceTruthy-e26b6f7f.js";import"./index-5d3d77bd.js";function re(o,s,e){let i=e.initialDeps??[],t;return()=>{var l,a,n,u;let f;e.key&&((l=e.debug)!=null&&l.call(e))&&(f=Date.now());const v=o();if(!(v.length!==i.length||v.some((P,M)=>i[M]!==P)))return t;i=v;let I;if(e.key&&((a=e.debug)!=null&&a.call(e))&&(I=Date.now()),t=s(...v),e.key&&((n=e.debug)!=null&&n.call(e))){const P=Math.round((Date.now()-f)*100)/100,M=Math.round((Date.now()-I)*100)/100,V=M/16,w=(O,b)=>{for(O=String(O);O.length<b;)O=" "+O;return O};console.info(`%c⏱ ${w(M,5)} /${w(P,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*V,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(u=e==null?void 0:e.onChange)==null||u.call(e,t),t}}function fe(o,s){if(o===void 0)throw new Error(`Unexpected undefined${s?`: ${s}`:""}`);return o}const It=(o,s)=>Math.abs(o-s)<1,_t=(o,s,e)=>{let i;return function(...t){o.clearTimeout(i),i=o.setTimeout(()=>s.apply(this,t),e)}},wt=o=>o,Ot=o=>{const s=Math.max(o.startIndex-o.overscan,0),e=Math.min(o.endIndex+o.overscan,o.count-1),i=[];for(let t=s;t<=e;t++)i.push(t);return i},Ct=(o,s)=>{const e=o.scrollElement;if(!e)return;const i=o.targetWindow;if(!i)return;const t=a=>{const{width:n,height:u}=a;s({width:Math.round(n),height:Math.round(u)})};if(t(e.getBoundingClientRect()),!i.ResizeObserver)return()=>{};const l=new i.ResizeObserver(a=>{const n=a[0];if(n!=null&&n.borderBoxSize){const u=n.borderBoxSize[0];if(u){t({width:u.inlineSize,height:u.blockSize});return}}t(e.getBoundingClientRect())});return l.observe(e,{box:"border-box"}),()=>{l.unobserve(e)}},we={passive:!0},Rt=typeof window>"u"?!0:"onscrollend"in window,Et=(o,s)=>{const e=o.scrollElement;if(!e)return;const i=o.targetWindow;if(!i)return;let t=0;const l=Rt?()=>{}:_t(i,()=>{s(t,!1)},o.options.isScrollingResetDelay),a=f=>()=>{t=e[o.options.horizontal?"scrollLeft":"scrollTop"],l(),s(t,f)},n=a(!0),u=a(!1);return u(),e.addEventListener("scroll",n,we),e.addEventListener("scrollend",u,we),()=>{e.removeEventListener("scroll",n),e.removeEventListener("scrollend",u)}},Tt=(o,s,e)=>{if(s!=null&&s.borderBoxSize){const i=s.borderBoxSize[0];if(i)return Math.round(i[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(o.getBoundingClientRect()[e.options.horizontal?"width":"height"])},Mt=(o,{adjustments:s=0,behavior:e},i)=>{var t,l;const a=o+s;(l=(t=i.scrollElement)==null?void 0:t.scrollTo)==null||l.call(t,{[i.options.horizontal?"left":"top"]:a,behavior:e})};class Vt{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const i=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(t=>{t.forEach(l=>{this._measureElement(l.target,l)})}));return{disconnect:()=>{var t;return(t=i())==null?void 0:t.disconnect()},observe:t=>{var l;return(l=i())==null?void 0:l.observe(t,{box:"border-box"})},unobserve:t=>{var l;return(l=i())==null?void 0:l.unobserve(t)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([i,t])=>{typeof t>"u"&&delete e[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:wt,rangeExtractor:Ot,onChange:()=>{},measureElement:Tt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,...e}},this.notify=(e,i)=>{var t,l;const{startIndex:a,endIndex:n}=this.range??{startIndex:void 0,endIndex:void 0},u=this.calculateRange();(e||a!==(u==null?void 0:u.startIndex)||n!==(u==null?void 0:u.endIndex))&&((l=(t=this.options).onChange)==null||l.call(t,this,i))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.notify(!1,!1);return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,t=>{this.scrollRect=t,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(t,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<t?"forward":"backward":null,this.scrollOffset=t;const a=this.isScrolling;this.isScrolling=l,this.notify(a!==l,l)}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,i)=>{const t=new Map,l=new Map;for(let a=i-1;a>=0;a--){const n=e[a];if(t.has(n.lane))continue;const u=l.get(n.lane);if(u==null||n.end>u.end?l.set(n.lane,n):n.end<u.end&&t.set(n.lane,!0),t.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((a,n)=>a.end===n.end?a.index-n.index:a.end-n.end)[0]:void 0},this.getMeasurementOptions=re(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,i,t,l,a)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:i,scrollMargin:t,getItemKey:l,enabled:a}),{key:!1}),this.getMeasurements=re(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:i,scrollMargin:t,getItemKey:l,enabled:a},n)=>{var u;if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const f=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const v=this.measurementsCache.slice(0,f);for(let d=f;d<e;d++){let I=(u=this.measurementsCache[d])==null?void 0:u.measureElement;I||(I=z=>{const h=l(d),_=this.elementsCache.get(h);if(!z){_&&(this.observer.unobserve(_),this.elementsCache.delete(h));return}_!==z&&(_&&this.observer.unobserve(_),this.observer.observe(z),this.elementsCache.set(h,z)),z.isConnected&&this.resizeItem(d,this.options.measureElement(z,void 0,this))});const P=l(d),M=this.options.lanes===1?v[d-1]:this.getFurthestMeasurement(v,d),V=M?M.end+this.options.gap:i+t,w=n.get(P),O=typeof w=="number"?w:this.options.estimateSize(d),b=V+O,E=M?M.lane:d%this.options.lanes;v[d]={index:d,start:V,size:O,end:b,key:P,lane:E,measureElement:I}}return this.measurementsCache=v,v},{key:!1,debug:()=>this.options.debug}),this.calculateRange=re(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(e,i,t)=>this.range=e.length>0&&i>0?kt({measurements:e,outerSize:i,scrollOffset:t}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=re(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(e,i,t,l)=>i===null?[]:e({startIndex:i.startIndex,endIndex:i.endIndex,overscan:t,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const i=this.options.indexAttribute,t=e.getAttribute(i);return t?parseInt(t,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(e,i)=>{const t=this.indexFromElement(e),l=this.getMeasurements()[t];if(!l||!e.isConnected){this.elementsCache.forEach((n,u)=>{n===e&&(this.observer.unobserve(e),this.elementsCache.delete(u))});return}const a=this.elementsCache.get(l.key);a!==e&&(a&&this.observer.unobserve(a),this.observer.observe(e),this.elementsCache.set(l.key,e)),this.resizeItem(t,this.options.measureElement(e,i,this))},this.resizeItem=(e,i)=>{const t=this.getMeasurements()[e];if(!t)return;const l=this.itemSizeCache.get(t.key)??t.size,a=i-l;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(t,a,this):t.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,i)),this.notify(!0,!1))},this.measureElement=e=>{e&&this._measureElement(e,void 0)},this.getVirtualItems=re(()=>[this.getIndexes(),this.getMeasurements()],(e,i)=>{const t=[];for(let l=0,a=e.length;l<a;l++){const n=e[l],u=i[n];t.push(u)}return t},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const i=this.getMeasurements();if(i.length!==0)return fe(i[ze(0,i.length-1,t=>fe(i[t]).start,e)])},this.getOffsetForAlignment=(e,i)=>{const t=this.getSize(),l=this.getScrollOffset();i==="auto"&&(e<=l?i="start":e>=l+t?i="end":i="start"),i==="start"?e=e:i==="end"?e=e-t:i==="center"&&(e=e-t/2);const a=this.options.horizontal?"scrollWidth":"scrollHeight",u=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-t;return Math.max(Math.min(u,e),0)},this.getOffsetForIndex=(e,i="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const t=this.getMeasurements()[e];if(!t)return;const l=this.getSize(),a=this.getScrollOffset();if(i==="auto")if(t.end>=a+l-this.options.scrollPaddingEnd)i="end";else if(t.start<=a+this.options.scrollPaddingStart)i="start";else return[a,i];const n=i==="end"?t.end+this.options.scrollPaddingEnd:t.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(n,i),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:i="start",behavior:t}={})=>{this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,i),{adjustments:void 0,behavior:t})},this.scrollToIndex=(e,{align:i="auto",behavior:t}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const l=this.getOffsetForIndex(e,i);if(!l)return;const[a,n]=l;this._scrollToOffset(a,{adjustments:void 0,behavior:t}),t!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[f]=fe(this.getOffsetForIndex(e,n));It(f,this.getScrollOffset())||this.scrollToIndex(e,{align:n,behavior:t})}else this.scrollToIndex(e,{align:n,behavior:t})}))},this.scrollBy=(e,{behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var e;const i=this.getMeasurements();let t;return i.length===0?t=this.options.paddingStart:t=this.options.lanes===1?((e=i[i.length-1])==null?void 0:e.end)??0:Math.max(...i.slice(-this.options.lanes).map(l=>l.end)),t-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(e,{adjustments:i,behavior:t})=>{this.options.scrollToFn(e,{behavior:t,adjustments:i},this)},this.measure=()=>{var e,i;this.itemSizeCache=new Map,(i=(e=this.options).onChange)==null||i.call(e,this,!1)},this.setOptions(s)}}const ze=(o,s,e,i)=>{for(;o<=s;){const t=(o+s)/2|0,l=e(t);if(l<i)o=t+1;else if(l>i)s=t-1;else return t}return o>0?o-1:0};function kt({measurements:o,outerSize:s,scrollOffset:e}){const i=o.length-1,l=ze(0,i,n=>o[n].start,e);let a=l;for(;a<i&&o[a].end<e+s;)a++;return{startIndex:l,endIndex:a}}function Pt(o){const s=new Vt(m(o)),e=Ye(s),i=s._didMount();return ee(()=>m(o).getScrollElement(),t=>{t&&s._willUpdate()},{immediate:!0}),ee(()=>m(o),t=>{s.setOptions({...t,onChange:(l,a)=>{var n;ye(e),(n=t.onChange)==null||n.call(t,l,a)}}),s._willUpdate(),ye(e)},{immediate:!0}),Ge(i),e}function $t(o){return Pt(g(()=>({observeElementRect:Ct,observeElementOffset:Et,scrollToFn:Mt,...m(o)})))}function Dt(o,s,e){let i=A(e==null?void 0:e.value),t=g(()=>o.value!==void 0);return[g(()=>t.value?o.value:i.value),function(l){return t.value||(i.value=l),s==null?void 0:s(l)}]}function zt(){let o=he();return Ee(()=>o.dispose()),o}function At(){let o=zt();return s=>{o.dispose(),o.nextFrame(s)}}function Oe(o,s){if(o)return o;let e=s??"button";if(typeof e=="string"&&e.toLowerCase()==="button")return"button"}function Ft(o,s){let e=A(Oe(o.value.type,o.value.as));return ue(()=>{e.value=Oe(o.value.type,o.value.as)}),ie(()=>{var i;e.value||T(s)&&T(s)instanceof HTMLButtonElement&&!((i=T(s))!=null&&i.hasAttribute("type"))&&(e.value="button")}),e}function Ce(o){return[o.screenX,o.screenY]}function Nt(){let o=A([-1,-1]);return{wasMoved(s){let e=Ce(s);return o.value[0]===e[0]&&o.value[1]===e[1]?!1:(o.value=e,!0)},update(s){o.value=Ce(s)}}}function Bt({container:o,accept:s,walk:e,enabled:i}){ie(()=>{let t=o.value;if(!t||i!==void 0&&!i.value)return;let l=Te(o);if(!l)return;let a=Object.assign(u=>s(u),{acceptNode:s}),n=l.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,a,!1);for(;n.nextNode();)e(n.currentNode)})}var Ae=(o=>(o[o.Left=0]="Left",o[o.Right=2]="Right",o))(Ae||{});function Lt(o){throw new Error("Unexpected object: "+o)}var B=(o=>(o[o.First=0]="First",o[o.Previous=1]="Previous",o[o.Next=2]="Next",o[o.Last=3]="Last",o[o.Specific=4]="Specific",o[o.Nothing=5]="Nothing",o))(B||{});function Re(o,s){let e=s.resolveItems();if(e.length<=0)return null;let i=s.resolveActiveIndex(),t=i??-1;switch(o.focus){case 0:{for(let l=0;l<e.length;++l)if(!s.resolveDisabled(e[l],l,e))return l;return i}case 1:{t===-1&&(t=e.length);for(let l=t-1;l>=0;--l)if(!s.resolveDisabled(e[l],l,e))return l;return i}case 2:{for(let l=t+1;l<e.length;++l)if(!s.resolveDisabled(e[l],l,e))return l;return i}case 3:{for(let l=e.length-1;l>=0;--l)if(!s.resolveDisabled(e[l],l,e))return l;return i}case 4:{for(let l=0;l<e.length;++l)if(s.resolveId(e[l],l,e)===o.id)return l;return i}case 5:return null;default:Lt(o)}}function Fe(o={},s=null,e=[]){for(let[i,t]of Object.entries(o))Be(e,Ne(s,i),t);return e}function Ne(o,s){return o?o+"["+s+"]":s}function Be(o,s,e){if(Array.isArray(e))for(let[i,t]of e.entries())Be(o,Ne(s,i.toString()),t);else e instanceof Date?o.push([s,e.toISOString()]):typeof e=="boolean"?o.push([s,e?"1":"0"]):typeof e=="string"?o.push([s,e]):typeof e=="number"?o.push([s,`${e}`]):e==null?o.push([s,""]):Fe(e,s,o)}function Ut(o,s){return o===s}var jt=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(jt||{}),qt=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(qt||{}),Wt=(o=>(o[o.Pointer=0]="Pointer",o[o.Focus=1]="Focus",o[o.Other=2]="Other",o))(Wt||{});let Le=Symbol("ComboboxContext");function te(o){let s=ke(Le,null);if(s===null){let e=new Error(`<${o} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,te),e}return s}let Ue=Symbol("VirtualContext"),Ht=q({name:"VirtualProvider",setup(o,{slots:s}){let e=te("VirtualProvider"),i=g(()=>{let n=T(e.optionsRef);if(!n)return{start:0,end:0};let u=window.getComputedStyle(n);return{start:parseFloat(u.paddingBlockStart||u.paddingTop),end:parseFloat(u.paddingBlockEnd||u.paddingBottom)}}),t=$t(g(()=>({scrollPaddingStart:i.value.start,scrollPaddingEnd:i.value.end,count:e.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return T(e.optionsRef)},overscan:12}))),l=g(()=>{var n;return(n=e.virtual.value)==null?void 0:n.options}),a=A(0);return ee([l],()=>{a.value+=1}),Me(Ue,e.virtual.value?t:null),()=>[ce("div",{style:{position:"relative",width:"100%",height:`${t.value.getTotalSize()}px`},ref:n=>{if(n){if(typeof process<"u"&&{}.JEST_WORKER_ID!==void 0||e.activationTrigger.value===0)return;e.activeOptionIndex.value!==null&&e.virtual.value.options.length>e.activeOptionIndex.value&&t.value.scrollToIndex(e.activeOptionIndex.value)}}},t.value.getVirtualItems().map(n=>Xe(s.default({option:e.virtual.value.options[n.index],open:e.comboboxState.value===0})[0],{key:`${a.value}-${n.index}`,"data-index":n.index,"aria-setsize":e.virtual.value.options.length,"aria-posinset":n.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${n.start}px)`,overflowAnchor:"none"}})))]}}),je=q({name:"Combobox",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(o,{slots:s,attrs:e,emit:i}){let t=A(1),l=A(null),a=A(null),n=A(null),u=A(null),f=A({static:!1,hold:!1}),v=A([]),d=A(null),I=A(2),P=A(!1);function M(r=c=>c){let c=d.value!==null?v.value[d.value]:null,y=r(v.value.slice()),S=y.length>0&&y[0].dataRef.order.value!==null?y.sort((D,K)=>D.dataRef.order.value-K.dataRef.order.value):it(y,D=>T(D.dataRef.domRef)),$=c?S.indexOf(c):null;return $===-1&&($=null),{options:S,activeOptionIndex:$}}let V=g(()=>o.multiple?1:0),w=g(()=>o.nullable),[O,b]=Dt(g(()=>o.modelValue),r=>i("update:modelValue",r),g(()=>o.defaultValue)),E=g(()=>O.value===void 0?ne(V.value,{[1]:[],[0]:void 0}):O.value),z=null,h=null;function _(r){return ne(V.value,{[0](){return b==null?void 0:b(r)},[1]:()=>{let c=J(p.value.value).slice(),y=J(r),S=c.findIndex($=>p.compare(y,J($)));return S===-1?c.push(y):c.splice(S,1),b==null?void 0:b(c)}})}let k=g(()=>{});ee([k],([r],[c])=>{if(p.virtual.value&&r&&c&&d.value!==null){let y=r.indexOf(c[d.value]);y!==-1?d.value=y:d.value=null}});let p={comboboxState:t,value:E,mode:V,compare(r,c){if(typeof o.by=="string"){let y=o.by;return(r==null?void 0:r[y])===(c==null?void 0:c[y])}return o.by===null?Ut(r,c):o.by(r,c)},calculateIndex(r){return p.virtual.value?o.by===null?p.virtual.value.options.indexOf(r):p.virtual.value.options.findIndex(c=>p.compare(c,r)):v.value.findIndex(c=>p.compare(c.dataRef.value,r))},defaultValue:g(()=>o.defaultValue),nullable:w,immediate:g(()=>!1),virtual:g(()=>null),inputRef:a,labelRef:l,buttonRef:n,optionsRef:u,disabled:g(()=>o.disabled),options:v,change(r){b(r)},activeOptionIndex:g(()=>{if(P.value&&d.value===null&&(p.virtual.value?p.virtual.value.options.length>0:v.value.length>0)){if(p.virtual.value){let c=p.virtual.value.options.findIndex(y=>{var S;return!((S=p.virtual.value)!=null&&S.disabled(y))});if(c!==-1)return c}let r=v.value.findIndex(c=>!c.dataRef.disabled);if(r!==-1)return r}return d.value}),activationTrigger:I,optionsPropsRef:f,closeCombobox(){P.value=!1,!o.disabled&&t.value!==1&&(t.value=1,d.value=null)},openCombobox(){if(P.value=!0,!o.disabled&&t.value!==0){if(p.value.value){let r=p.calculateIndex(p.value.value);r!==-1&&(d.value=r)}t.value=0}},setActivationTrigger(r){I.value=r},goToOption(r,c,y){P.value=!1,z!==null&&cancelAnimationFrame(z),z=requestAnimationFrame(()=>{if(o.disabled||u.value&&!f.value.static&&t.value===1)return;if(p.virtual.value){d.value=r===B.Specific?c:Re({focus:r},{resolveItems:()=>p.virtual.value.options,resolveActiveIndex:()=>{var D,K;return(K=(D=p.activeOptionIndex.value)!=null?D:p.virtual.value.options.findIndex(oe=>{var se;return!((se=p.virtual.value)!=null&&se.disabled(oe))}))!=null?K:null},resolveDisabled:D=>p.virtual.value.disabled(D),resolveId(){throw new Error("Function not implemented.")}}),I.value=y??2;return}let S=M();if(S.activeOptionIndex===null){let D=S.options.findIndex(K=>!K.dataRef.disabled);D!==-1&&(S.activeOptionIndex=D)}let $=r===B.Specific?c:Re({focus:r},{resolveItems:()=>S.options,resolveActiveIndex:()=>S.activeOptionIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});d.value=$,I.value=y??2,v.value=S.options})},selectOption(r){let c=v.value.find(S=>S.id===r);if(!c)return;let{dataRef:y}=c;_(y.value)},selectActiveOption(){if(p.activeOptionIndex.value!==null){if(p.virtual.value)_(p.virtual.value.options[p.activeOptionIndex.value]);else{let{dataRef:r}=v.value[p.activeOptionIndex.value];_(r.value)}p.goToOption(B.Specific,p.activeOptionIndex.value)}},registerOption(r,c){let y=Ve({id:r,dataRef:c});if(p.virtual.value){v.value.push(y);return}h&&cancelAnimationFrame(h);let S=M($=>($.push(y),$));d.value===null&&p.isSelected(c.value.value)&&(S.activeOptionIndex=S.options.indexOf(y)),v.value=S.options,d.value=S.activeOptionIndex,I.value=2,S.options.some($=>!T($.dataRef.domRef))&&(h=requestAnimationFrame(()=>{let $=M();v.value=$.options,d.value=$.activeOptionIndex}))},unregisterOption(r,c){if(z!==null&&cancelAnimationFrame(z),c&&(P.value=!0),p.virtual.value){v.value=v.value.filter(S=>S.id!==r);return}let y=M(S=>{let $=S.findIndex(D=>D.id===r);return $!==-1&&S.splice($,1),S});v.value=y.options,d.value=y.activeOptionIndex,I.value=2},isSelected(r){return ne(V.value,{[0]:()=>p.compare(J(p.value.value),J(r)),[1]:()=>J(p.value.value).some(c=>p.compare(J(c),J(r)))})},isActive(r){return d.value===p.calculateIndex(r)}};Ze([a,n,u],()=>p.closeCombobox(),g(()=>t.value===0)),Me(Le,p),et(g(()=>ne(t.value,{[0]:ve.Open,[1]:ve.Closed})));let x=g(()=>{var r;return(r=T(a))==null?void 0:r.closest("form")});return ue(()=>{ee([x],()=>{if(!x.value||o.defaultValue===void 0)return;function r(){p.change(o.defaultValue)}return x.value.addEventListener("reset",r),()=>{var c;(c=x.value)==null||c.removeEventListener("reset",r)}},{immediate:!0})}),()=>{var r,c,y;let{name:S,disabled:$,form:D,...K}=o,oe={open:t.value===0,disabled:$,activeIndex:p.activeOptionIndex.value,activeOption:p.activeOptionIndex.value===null?null:p.virtual.value?p.virtual.value.options[(r=p.activeOptionIndex.value)!=null?r:0]:(y=(c=p.options.value[p.activeOptionIndex.value])==null?void 0:c.dataRef.value)!=null?y:null,value:E.value};return ce(Q,[...S!=null&&E.value!=null?Fe({[S]:E.value}).map(([se,Je])=>ce(tt,ot({features:nt.Hidden,key:se,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:D,disabled:$,name:se,value:Je}))):[],ae({theirProps:{...e,...be(K,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:oe,slots:s,attrs:e,name:"Combobox"})])}}}),qe=q({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:null}},setup(o,{attrs:s,slots:e}){var i;let t=(i=o.id)!=null?i:`headlessui-combobox-label-${de()}`,l=te("ComboboxLabel");function a(){var n;(n=T(l.inputRef))==null||n.focus({preventScroll:!0})}return()=>{let n={open:l.comboboxState.value===0,disabled:l.disabled.value},{...u}=o,f={id:t,ref:l.labelRef,onClick:a};return ae({ourProps:f,theirProps:u,slot:n,attrs:s,slots:e,name:"ComboboxLabel"})}}}),We=q({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(o,{attrs:s,slots:e,expose:i}){var t;let l=(t=o.id)!=null?t:`headlessui-combobox-button-${de()}`,a=te("ComboboxButton");i({el:a.buttonRef,$el:a.buttonRef});function n(v){a.disabled.value||(a.comboboxState.value===0?a.closeCombobox():(v.preventDefault(),a.openCombobox()),Y(()=>{var d;return(d=T(a.inputRef))==null?void 0:d.focus({preventScroll:!0})}))}function u(v){switch(v.key){case W.ArrowDown:v.preventDefault(),v.stopPropagation(),a.comboboxState.value===1&&a.openCombobox(),Y(()=>{var d;return(d=a.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case W.ArrowUp:v.preventDefault(),v.stopPropagation(),a.comboboxState.value===1&&(a.openCombobox(),Y(()=>{a.value.value||a.goToOption(B.Last)})),Y(()=>{var d;return(d=a.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case W.Escape:if(a.comboboxState.value!==0)return;v.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&v.stopPropagation(),a.closeCombobox(),Y(()=>{var d;return(d=a.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return}}let f=Ft(g(()=>({as:o.as,type:s.type})),a.buttonRef);return()=>{var v,d;let I={open:a.comboboxState.value===0,disabled:a.disabled.value,value:a.value.value},{...P}=o,M={ref:a.buttonRef,id:l,type:f.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(v=T(a.optionsRef))==null?void 0:v.id,"aria-expanded":a.comboboxState.value===0,"aria-labelledby":a.labelRef.value?[(d=T(a.labelRef))==null?void 0:d.id,l].join(" "):void 0,disabled:a.disabled.value===!0?!0:void 0,onKeydown:u,onClick:n};return ae({ourProps:M,theirProps:P,slot:I,attrs:s,slots:e,name:"ComboboxButton"})}}}),He=q({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:o=>!0},setup(o,{emit:s,attrs:e,slots:i,expose:t}){var l;let a=(l=o.id)!=null?l:`headlessui-combobox-input-${de()}`,n=te("ComboboxInput"),u=g(()=>Te(T(n.inputRef))),f={value:!1};t({el:n.inputRef,$el:n.inputRef});function v(){n.change(null);let h=T(n.optionsRef);h&&(h.scrollTop=0),n.goToOption(B.Nothing)}let d=g(()=>{var h;let _=n.value.value;return T(n.inputRef)?typeof o.displayValue<"u"&&_!==void 0?(h=o.displayValue(_))!=null?h:"":typeof _=="string"?_:"":""});ue(()=>{ee([d,n.comboboxState,u],([h,_],[k,p])=>{if(f.value)return;let x=T(n.inputRef);x&&((p===0&&_===1||h!==k)&&(x.value=h),requestAnimationFrame(()=>{var r;if(f.value||!x||((r=u.value)==null?void 0:r.activeElement)!==x)return;let{selectionStart:c,selectionEnd:y}=x;Math.abs((y??0)-(c??0))===0&&c===0&&x.setSelectionRange(x.value.length,x.value.length)}))},{immediate:!0}),ee([n.comboboxState],([h],[_])=>{if(h===0&&_===1){if(f.value)return;let k=T(n.inputRef);if(!k)return;let p=k.value,{selectionStart:x,selectionEnd:r,selectionDirection:c}=k;k.value="",k.value=p,c!==null?k.setSelectionRange(x,r,c):k.setSelectionRange(x,r)}})});let I=A(!1);function P(){I.value=!0}function M(){he().nextFrame(()=>{I.value=!1})}let V=At();function w(h){switch(f.value=!0,V(()=>{f.value=!1}),h.key){case W.Enter:if(f.value=!1,n.comboboxState.value!==0||I.value)return;if(h.preventDefault(),h.stopPropagation(),n.activeOptionIndex.value===null){n.closeCombobox();return}n.selectActiveOption(),n.mode.value===0&&n.closeCombobox();break;case W.ArrowDown:return f.value=!1,h.preventDefault(),h.stopPropagation(),ne(n.comboboxState.value,{[0]:()=>n.goToOption(B.Next),[1]:()=>n.openCombobox()});case W.ArrowUp:return f.value=!1,h.preventDefault(),h.stopPropagation(),ne(n.comboboxState.value,{[0]:()=>n.goToOption(B.Previous),[1]:()=>{n.openCombobox(),Y(()=>{n.value.value||n.goToOption(B.Last)})}});case W.Home:if(h.shiftKey)break;return f.value=!1,h.preventDefault(),h.stopPropagation(),n.goToOption(B.First);case W.PageUp:return f.value=!1,h.preventDefault(),h.stopPropagation(),n.goToOption(B.First);case W.End:if(h.shiftKey)break;return f.value=!1,h.preventDefault(),h.stopPropagation(),n.goToOption(B.Last);case W.PageDown:return f.value=!1,h.preventDefault(),h.stopPropagation(),n.goToOption(B.Last);case W.Escape:if(f.value=!1,n.comboboxState.value!==0)return;h.preventDefault(),n.optionsRef.value&&!n.optionsPropsRef.value.static&&h.stopPropagation(),n.nullable.value&&n.mode.value===0&&n.value.value===null&&v(),n.closeCombobox();break;case W.Tab:if(f.value=!1,n.comboboxState.value!==0)return;n.mode.value===0&&n.activationTrigger.value!==1&&n.selectActiveOption(),n.closeCombobox();break}}function O(h){s("change",h),n.nullable.value&&n.mode.value===0&&h.target.value===""&&v(),n.openCombobox()}function b(h){var _,k,p;let x=(_=h.relatedTarget)!=null?_:Se.find(r=>r!==h.currentTarget);if(f.value=!1,!((k=T(n.optionsRef))!=null&&k.contains(x))&&!((p=T(n.buttonRef))!=null&&p.contains(x))&&n.comboboxState.value===0)return h.preventDefault(),n.mode.value===0&&(n.nullable.value&&n.value.value===null?v():n.activationTrigger.value!==1&&n.selectActiveOption()),n.closeCombobox()}function E(h){var _,k,p;let x=(_=h.relatedTarget)!=null?_:Se.find(r=>r!==h.currentTarget);(k=T(n.buttonRef))!=null&&k.contains(x)||(p=T(n.optionsRef))!=null&&p.contains(x)||n.disabled.value||n.immediate.value&&n.comboboxState.value!==0&&(n.openCombobox(),he().nextFrame(()=>{n.setActivationTrigger(1)}))}let z=g(()=>{var h,_,k,p;return(p=(k=(_=o.defaultValue)!=null?_:n.defaultValue.value!==void 0?(h=o.displayValue)==null?void 0:h.call(o,n.defaultValue.value):null)!=null?k:n.defaultValue.value)!=null?p:""});return()=>{var h,_,k,p,x,r,c;let y={open:n.comboboxState.value===0},{displayValue:S,onChange:$,...D}=o,K={"aria-controls":(h=n.optionsRef.value)==null?void 0:h.id,"aria-expanded":n.comboboxState.value===0,"aria-activedescendant":n.activeOptionIndex.value===null?void 0:n.virtual.value?(_=n.options.value.find(oe=>!n.virtual.value.disabled(oe.dataRef.value)&&n.compare(oe.dataRef.value,n.virtual.value.options[n.activeOptionIndex.value])))==null?void 0:_.id:(k=n.options.value[n.activeOptionIndex.value])==null?void 0:k.id,"aria-labelledby":(r=(p=T(n.labelRef))==null?void 0:p.id)!=null?r:(x=T(n.buttonRef))==null?void 0:x.id,"aria-autocomplete":"list",id:a,onCompositionstart:P,onCompositionend:M,onKeydown:w,onInput:O,onFocus:E,onBlur:b,role:"combobox",type:(c=e.type)!=null?c:"text",tabIndex:0,ref:n.inputRef,defaultValue:z.value,disabled:n.disabled.value===!0?!0:void 0};return ae({ourProps:K,theirProps:D,slot:y,attrs:e,slots:i,features:pe.RenderStrategy|pe.Static,name:"ComboboxInput"})}}}),Ke=q({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(o,{attrs:s,slots:e,expose:i}){let t=te("ComboboxOptions"),l=`headlessui-combobox-options-${de()}`;i({el:t.optionsRef,$el:t.optionsRef}),ie(()=>{t.optionsPropsRef.value.static=o.static}),ie(()=>{t.optionsPropsRef.value.hold=o.hold});let a=lt(),n=g(()=>a!==null?(a.value&ve.Open)===ve.Open:t.comboboxState.value===0);Bt({container:g(()=>T(t.optionsRef)),enabled:g(()=>t.comboboxState.value===0),accept(f){return f.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:f.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(f){f.setAttribute("role","none")}});function u(f){f.preventDefault()}return()=>{var f,v,d;let I={open:t.comboboxState.value===0},P={"aria-labelledby":(d=(f=T(t.labelRef))==null?void 0:f.id)!=null?d:(v=T(t.buttonRef))==null?void 0:v.id,id:l,ref:t.optionsRef,role:"listbox","aria-multiselectable":t.mode.value===1?!0:void 0,onMousedown:u},M=be(o,["hold"]);return ae({ourProps:P,theirProps:M,slot:I,attrs:s,slots:t.virtual.value&&t.comboboxState.value===0?{...e,default:()=>[ce(Ht,{},e.default)]}:e,features:pe.RenderStrategy|pe.Static,visible:n.value,name:"ComboboxOptions"})}}}),Qe=q({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(o,{slots:s,attrs:e,expose:i}){let t=te("ComboboxOption"),l=`headlessui-combobox-option-${de()}`,a=A(null),n=g(()=>o.disabled);i({el:a,$el:a});let u=g(()=>{var b;return t.virtual.value?t.activeOptionIndex.value===t.calculateIndex(o.value):t.activeOptionIndex.value===null?!1:((b=t.options.value[t.activeOptionIndex.value])==null?void 0:b.id)===l}),f=g(()=>t.isSelected(o.value)),v=ke(Ue,null),d=g(()=>({disabled:o.disabled,value:o.value,domRef:a,order:g(()=>o.order)}));ue(()=>t.registerOption(l,d)),Ee(()=>t.unregisterOption(l,u.value)),ie(()=>{let b=T(a);b&&(v==null||v.value.measureElement(b))}),ie(()=>{t.comboboxState.value===0&&u.value&&(t.virtual.value||t.activationTrigger.value!==0&&Y(()=>{var b,E;return(E=(b=T(a))==null?void 0:b.scrollIntoView)==null?void 0:E.call(b,{block:"nearest"})}))});function I(b){b.preventDefault(),b.button===Ae.Left&&(n.value||(t.selectOption(l),at()||requestAnimationFrame(()=>{var E;return(E=T(t.inputRef))==null?void 0:E.focus({preventScroll:!0})}),t.mode.value===0&&t.closeCombobox()))}function P(){var b;if(o.disabled||(b=t.virtual.value)!=null&&b.disabled(o.value))return t.goToOption(B.Nothing);let E=t.calculateIndex(o.value);t.goToOption(B.Specific,E)}let M=Nt();function V(b){M.update(b)}function w(b){var E;if(!M.wasMoved(b)||o.disabled||(E=t.virtual.value)!=null&&E.disabled(o.value)||u.value)return;let z=t.calculateIndex(o.value);t.goToOption(B.Specific,z,0)}function O(b){var E;M.wasMoved(b)&&(o.disabled||(E=t.virtual.value)!=null&&E.disabled(o.value)||u.value&&(t.optionsPropsRef.value.hold||t.goToOption(B.Nothing)))}return()=>{let{disabled:b}=o,E={active:u.value,selected:f.value,disabled:b},z={id:l,ref:a,role:"option",tabIndex:b===!0?void 0:-1,"aria-disabled":b===!0?!0:void 0,"aria-selected":f.value,disabled:void 0,onMousedown:I,onFocus:P,onPointerenter:V,onMouseenter:V,onPointermove:w,onMousemove:w,onPointerleave:O,onMouseleave:O},h=be(o,["order","value"]);return ae({ourProps:z,theirProps:h,slot:E,attrs:e,slots:s,name:"ComboboxOption"})}}});const Kt={class:"relative mt-2"},Qt=q({__name:"DropdownCustomer",props:{modelValue:null},emits:["update:modelValue"],setup(o,{emit:s}){const e=o,i=g({get:()=>{var n;return(n=t.value)==null?void 0:n.find(u=>u.id===e.modelValue)},set:n=>n&&s("update:modelValue",n.id)}),{data:t}=st(),l=A(""),a=g(()=>{var n;return l.value?((n=t.value)==null?void 0:n.filter(u=>u.name.toLowerCase().includes(l.value.toLowerCase())))||[]:t.value||[]});return(n,u)=>(C(),j(m(je),{as:"div",modelValue:m(i),"onUpdate:modelValue":u[1]||(u[1]=f=>G(i)?i.value=f:null)},{default:L(()=>{var f;return[F(m(qe),{class:"block text-sm font-medium leading-6 text-gray-900"},{default:L(()=>[H(" Customer ")]),_:1}),R("div",Kt,[F(m(He),{class:"w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:u[0]||(u[0]=v=>l.value=v.target.value),"display-value":v=>v.name},null,8,["display-value"]),F(m(We),{class:"absolute inset-y-0 right-0 flex items-center px-2 rounded-r-md focus:outline-none"},{default:L(()=>[F(m(Pe),{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})]),_:1}),((f=m(a))==null?void 0:f.length)>0?(C(),j(m(Ke),{key:0,class:"absolute z-10 w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:L(()=>[(C(!0),N(Q,null,ge(m(a),v=>(C(),j(m(Qe),{key:v.id,value:v,as:"template"},{default:L(({active:d,selected:I})=>[R("li",{class:Z(["relative cursor-default select-none py-2 pl-3 pr-9",d?"bg-indigo-600 text-white":"text-gray-900"])},[R("span",{class:Z(["block truncate",I&&"font-semibold"])},U(v.name),3),I?(C(),N("span",{key:0,class:Z(["absolute inset-y-0 right-0 flex items-center pr-4",d?"text-white":"text-indigo-600"])},[F(m($e),{class:"w-5 h-5","aria-hidden":"true"})],2)):X("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):X("",!0)])]}),_:1},8,["modelValue"]))}}),Jt=q({__name:"DropdownUnitQuantity",props:{modelValue:null,isLabelHidden:{type:Boolean},isNoMargin:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:s}){const e=o,i=rt.options,t=g({get:()=>e.modelValue,set:n=>s("update:modelValue",n)}),l=A(""),a=g(()=>l.value?(i==null?void 0:i.filter(n=>n.toLowerCase().includes(l.value.toLowerCase())))||[]:i||[]);return(n,u)=>(C(),j(m(je),{as:"div",modelValue:m(t),"onUpdate:modelValue":u[1]||(u[1]=f=>G(t)?t.value=f:null)},{default:L(()=>{var f;return[o.isLabelHidden?X("",!0):(C(),j(m(qe),{key:0,class:"block text-sm font-medium leading-6 text-gray-900"},{default:L(()=>[H(" Unit ")]),_:1})),R("div",{class:Z(["relative",{"mt-2":!o.isNoMargin}])},[F(m(He),{class:"w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:u[0]||(u[0]=v=>l.value=v.target.value)}),F(m(We),{class:"absolute inset-y-0 right-0 flex items-center px-2 rounded-r-md focus:outline-none"},{default:L(()=>[F(m(Pe),{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})]),_:1}),((f=m(a))==null?void 0:f.length)>0?(C(),j(m(Ke),{key:0,class:"absolute z-10 w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:L(()=>[(C(!0),N(Q,null,ge(m(a),v=>(C(),j(m(Qe),{key:v,value:v,as:"template"},{default:L(({active:d,selected:I})=>[R("li",{class:Z(["relative cursor-default select-none py-2 pl-3 pr-9",d?"bg-indigo-600 text-white":"text-gray-900"])},[R("span",{class:Z(["block truncate",I&&"font-semibold"])},U(v),3),I?(C(),N("span",{key:0,class:Z(["absolute inset-y-0 right-0 flex items-center pr-4",d?"text-white":"text-indigo-600"])},[F(m($e),{class:"w-5 h-5","aria-hidden":"true"})],2)):X("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):X("",!0)],2)]}),_:1},8,["modelValue"]))}}),Yt={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-0"},Gt={class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap"},Xt={class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap"},Zt={class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap"},eo={class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap"},to={class:"px-3 py-4 text-sm text-gray-500 whitespace-nowrap text-right"},oo={class:"relative py-4 pl-3 pr-4 text-sm font-medium text-right whitespace-nowrap sm:pr-0"},no=["onClick"],lo=q({__name:"InvoicePositionItem",props:{invoicePosition:null,isInitiallyInEditMode:{type:Boolean}},emits:["update:invoicePosition"],setup(o,{emit:s}){const e=o,i=V=>({...V,price:V.quantity*V.price_per_quantity}),t=V=>g({get:()=>e.invoicePosition[V],set:w=>{s("update:invoicePosition",i({...e.invoicePosition,[V]:w}))}}),l=t("service_date"),a=t("description"),n=t("quantity"),u=t("unit_quantity"),f=t("price_per_quantity"),v=g(()=>e.invoicePosition.price),d=A(!!e.isInitiallyInEditMode),I=A(null),P=async()=>{var V,w,O,b,E;await Y(),(E=(b=(O=(w=(V=I.value)==null?void 0:V.$el)==null?void 0:w.querySelector)==null?void 0:O.call(w,"input"))==null?void 0:b.focus)==null||E.call(b)};ue(()=>{d.value&&P()});const M=()=>{d.value=!d.value,d.value&&P()};return(V,w)=>(C(),N("tr",null,[R("td",Yt,[d.value?(C(),j(le,{key:0,"is-label-hidden":"","is-no-margin":"",name:"Service Date",type:"date",modelValue:m(l),"onUpdate:modelValue":w[0]||(w[0]=O=>G(l)?l.value=O:null),class:"-m-4 -mr-3",ref_key:"serviceDateInput",ref:I},null,8,["modelValue"])):(C(),N(Q,{key:1},[H(U(m(ut)(new Date(m(l)))),1)],64))]),R("td",Gt,[d.value?(C(),j(le,{key:0,"is-label-hidden":"","is-no-margin":"",name:"Description",type:"text",modelValue:m(a),"onUpdate:modelValue":w[1]||(w[1]=O=>G(a)?a.value=O:null),class:"-mx-2 -my-4"},null,8,["modelValue"])):(C(),N(Q,{key:1},[H(U(m(a)),1)],64))]),R("td",Xt,[d.value?(C(),j(le,{key:0,"is-label-hidden":"","is-no-margin":"",name:"Quantity",type:"number",step:"0.01",modelValue:m(n),"onUpdate:modelValue":w[2]||(w[2]=O=>G(n)?n.value=O:null),class:"-mx-2 -my-4"},null,8,["modelValue"])):(C(),N(Q,{key:1},[H(U(m(dt)(m(n),m(u))),1)],64))]),R("td",Zt,[d.value?(C(),j(Jt,{key:0,"is-label-hidden":"","is-no-margin":"",modelValue:m(u),"onUpdate:modelValue":w[3]||(w[3]=O=>G(u)?u.value=O:null),class:"-mx-2 -my-4"},null,8,["modelValue"])):(C(),N(Q,{key:1},[H(U(m(ct)(m(n),m(u))),1)],64))]),R("td",eo,[d.value?(C(),j(le,{key:0,"is-label-hidden":"","is-no-margin":"",name:"Price Per Quantity",type:"number",modelValue:m(f),"onUpdate:modelValue":w[4]||(w[4]=O=>G(f)?f.value=O:null),class:"-mx-2 -my-4"},null,8,["modelValue"])):(C(),N(Q,{key:1},[H(U(m(Ie)(m(f)))+" / "+U(m(u)),1)],64))]),R("td",to,U(m(Ie)(m(v))),1),R("td",oo,[R("button",{onClick:xe(M,["prevent"]),class:"text-indigo-600 hover:text-indigo-900"},U(d.value?"Done":"Edit"),9,no)])]))}}),io={class:"flow-root mt-8"},ao={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},so={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},ro={class:"min-w-full divide-y divide-gray-300"},uo=R("thead",null,[R("tr",null,[R("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0"}," Service Date "),R("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description "),R("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Quantity "),R("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Unit Quantity "),R("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Price per Quantity "),R("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Price "),R("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[R("span",{class:"sr-only"},"Edit")])])],-1),co={class:"divide-y divide-gray-200"},vo=q({__name:"InvoicePositionTable",emits:["createPosition"],setup(o){return(s,e)=>(C(),N("div",io,[R("div",ao,[R("div",so,[R("table",ro,[uo,R("tbody",co,[vt(s.$slots,"default")])]),F(me,{class:"ml-auto",onClick:e[0]||(e[0]=xe(i=>s.$emit("createPosition"),["prevent"]))},{default:L(()=>[H(" New Invoice Position ")]),_:1})])])]))}}),po={key:0},mo={key:1},fo=q({__name:"InvoiceCalendarList",props:{customerId:null,month:null,year:null},setup(o){const s=o,{customerId:e}=De(s),{data:i,error:t}=pt(e),l=g(()=>i.value?i.value.filter(n=>n.month===s.month).filter(n=>n.year===s.year):[]);return(a,n)=>(C(),N("div",null,[m(l).length?(C(),N("div",po,[R("div",null,"Found "+U(m(l).length)+" items in the calendar",1),F(me,{onClick:n[0]||(n[0]=u=>a.$emit("importCalendarEvents",m(l)))},{default:L(()=>[H("Import")]),_:1})])):X("",!0),m(t)?(C(),N("div",mo,"Error: "+U(m(t)),1)):X("",!0)]))}}),ho={key:0},bo={key:1},go=["onSubmit"],xo={class:"grid grid-cols-2 space-x-2"},Oo=q({__name:"InvoiceDetailView",props:{invoiceId:null},setup(o){const s=o,{invoiceId:e}=De(s),i=ht(),{query:t}=i,l=Ve({id:(e==null?void 0:e.value)||0,customer_id:Number(t.customer_id)||0,for_month:Number(t.for_month)||0,for_year:Number(t.for_year)||0,invoice_number:0,invoice_position:[]}),a=g({get:()=>bt({year:l.for_year,month:l.for_month}),set:x=>{const[r,c]=x.split("-");r.length<4||(l.for_year=Number(r),l.for_month=Number(c))}}),{data:n}=mt(g(()=>l.customer_id)),u=()=>{var x;l.invoice_position=[...l.invoice_position,{service_date:new Date(l.for_year,l.for_month,1).toISOString().slice(0,10),description:"",quantity:0,unit_quantity:"Stunde",price_per_quantity:((x=n.value)==null?void 0:x.default_price_per_hour)||0,price:0}]},f=({index:x,invoicePosition:r})=>{l.invoice_position=[...l.invoice_position.slice(0,x),r,...l.invoice_position.slice(x+1)]},{data:v,isError:d,isLoading:I,error:P}=xt(e);_e(v,()=>{Object.assign(l,ft.omit(v.value,"id"))});const{nextInvoiceNumber:M,isLoading:V}=yt(),w=g(()=>{var x;return e!=null&&e.value?(x=v.value)==null?void 0:x.invoice_number:M.value});_e(w,x=>{l.invoice_number=x});const O=g(()=>I.value||V.value),b=x=>{l.invoice_position=[...l.invoice_position,...x.map(r=>{var c,y;return{service_date:new Date(r.year,r.month-1,r.day).toISOString().slice(0,10),description:r.title,quantity:r.durationInHours,unit_quantity:"Stunde",price_per_quantity:((c=n.value)==null?void 0:c.default_price_per_hour)||0,price:r.durationInHours*(((y=n.value)==null?void 0:y.default_price_per_hour)||0)}})]},{mutateAsync:E,isLoading:z}=St(),h=async()=>{const x=await E(l);e!=null&&e.value||_.replace(`/invoice/${x.invoiceId}`)},_=gt(),k=g(()=>!!(e!=null&&e.value)),p=()=>{k.value&&_.push(`/invoice/${e==null?void 0:e.value}/print`)};return(x,r)=>(C(),N(Q,null,[m(O)?(C(),N("div",ho,"Loading...")):m(d)?(C(),N("div",bo,"Error: "+U(m(P)),1)):X("",!0),R("form",{onSubmit:xe(h,["prevent"]),class:"space-y-6"},[F(Qt,{modelValue:m(l).customer_id,"onUpdate:modelValue":r[0]||(r[0]=c=>m(l).customer_id=c)},null,8,["modelValue"]),F(le,{name:"Invoice Number",type:"number",min:"0",modelValue:m(l).invoice_number,"onUpdate:modelValue":r[1]||(r[1]=c=>m(l).invoice_number=c)},null,8,["modelValue"]),F(le,{name:"For Month",type:"date",modelValue:m(a),"onUpdate:modelValue":r[2]||(r[2]=c=>G(a)?a.value=c:null)},null,8,["modelValue"]),F(vo,{onCreatePosition:u},{default:L(()=>[(C(!0),N(Q,null,ge(m(l).invoice_position,(c,y)=>(C(),j(lo,{key:y,"invoice-position":c,"is-initially-in-edit-mode":!c.description&&!c.quantity,"onUpdate:invoicePosition":S=>f({index:y,invoicePosition:S})},null,8,["invoice-position","is-initially-in-edit-mode","onUpdate:invoicePosition"]))),128))]),_:1}),R("div",xo,[F(me,{type:"submit"},{default:L(()=>[H("Save "+U(m(z)?"...":""),1)]),_:1}),F(me,{disabled:!m(k),onClick:p},{default:L(()=>[H("Print")]),_:1},8,["disabled"])])],40,go),F(fo,{class:"mt-6",customerId:m(l).customer_id,month:m(l).for_month,year:m(l).for_year,onImportCalendarEvents:r[3]||(r[3]=c=>b(c))},null,8,["customerId","month","year"])],64))}});export{Oo as default};
