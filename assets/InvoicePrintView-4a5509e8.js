import{a as B}from"./useCustomer-4b44fdc6.js";import{i as z,t as C,f as k,b as N,c as S,d as x,e as q}from"./useInvoice-87759295.js";import{d as _,o,c,f as t,t as n,k as a,F as u,e as i,b as l,h as R,a9 as M,a3 as T,aa as A,g as f,i as w,a7 as E,ab as P,j as I,ac as D,ad as $,n as U,z as g,u as V,ae as j,af as F,I as K}from"./index-bca75412.js";import{_ as L}from"./BaseButton.vue_vue_type_script_setup_true_lang-1931671c.js";const H={class:"pt-[45mm] pl-[20mm]"},Q={class:"flex justify-between"},Y={class:"w-[85mm] pl-[5mm] mb-[8.46mm]"},Z={class:"text-[10px] underline h-[17.7mm] pt-[14.4mm] align-bottom"},G={class:"h-[27.3mm]"},J=t("br",null,null,-1),O=t("br",null,null,-1),W=t("br",null,null,-1),X={class:"mr-[20mm] text-right"},tt={class:"mb-2"},et={class:"font-bold"},nt=t("br",null,null,-1),st=t("br",null,null,-1),at=t("br",null,null,-1),lt={class:"kommunikation"},ot=t("br",null,null,-1),ct=t("br",null,null,-1),ut=t("br",null,null,-1),it={class:"flex justify-between"},rt={class:"ml-[5mm]"},dt={class:"text-xl mb-2"},mt={class:"text-sm mb-2"},ht=t("p",null,"Bitte bei Zahlungen und Schriftverkehr angeben.",-1),_t={class:"mr-[20mm] text-right"},bt=t("br",null,null,-1),ft=t("br",null,null,-1),vt=_({__name:"InvoiceHeader",props:{userData:null,invoice:null,customer:null},setup(e){return(r,m)=>(o(),c("div",H,[t("div",Q,[t("div",Y,[t("p",Z,n(e.userData.name)+" - "+n(e.userData.street)+" - "+n(e.userData.zip)+" "+n(e.userData.city),1),t("p",G,[a(n(e.customer.name)+" ",1),J,e.customer.name_additional?(o(),c(u,{key:0},[a(n(e.customer.name_additional)+" ",1),O],64)):i("",!0),a(" "+n(e.customer.street)+" ",1),W,a(" "+n(e.customer.zip)+" "+n(e.customer.city),1)])]),t("div",X,[t("p",tt,[t("span",et,n(e.userData.company_name),1),nt,a(" (Inh. "+n(e.userData.name)+") ",1),st,a(" "+n(e.userData.street)+" ",1),at,a(" "+n(e.userData.zip)+" "+n(e.userData.city),1)]),t("p",lt,[e.userData.tel?(o(),c(u,{key:0},[a(" Tel.: "+n(e.userData.tel)+" ",1),ot],64)):i("",!0),e.userData.mobile?(o(),c(u,{key:1},[a(" Mobil: "+n(e.userData.mobile)+" ",1),ct],64)):i("",!0),e.userData.email?(o(),c(u,{key:2},[a(" E-Mail: "+n(e.userData.email)+" ",1),ut],64)):i("",!0)])])]),t("div",it,[t("div",rt,[t("h1",dt," Rechnung für "+n(l(z)(new Date(l(C)({month:e.invoice.for_month,year:e.invoice.for_year})))),1),t("h3",mt,"Rechnung Nr. "+n(e.invoice.invoice_number),1),ht]),t("div",_t,[t("p",null,[a(" Rechnungsdatum: "+n(l(k)(new Date(e.invoice.created_at||"")))+" ",1),bt,a(" Kundennummer: "+n(e.customer.id)+" ",1),ft])])])]))}}),xt={class:"ml-[25mm] mr-[20mm] h-[135mm]"},Dt={class:"tabelle-leistungen"},$t={class:"w-full mt-4"},yt=t("thead",null,[t("tr",{class:"[&_th]:font-[400] text-left bg-slate-200"},[t("th",{class:"w-[20px] pr-1 text-right"},"#"),t("th",{class:"w-24"},"Leistungsdatum"),t("th",{class:"beschreibung"},"Beschreibung"),t("th",{class:"w-[70px] text-center pr-2",colspan:"2"},"Menge"),t("th",{class:"w-[97px]"},"Preis pro Einheit"),t("th",{class:"w-[50px] text-right"},"Betrag")])],-1),gt={class:"text-right block pr-1"},kt={class:"text-center block"},wt={class:"pr-2"},It={class:""},pt={class:"text-right pr-2 font-mono text-[8pt] pt-[2px]"},Bt={class:""},zt={class:"text-right block font-mono text-[8pt] pt-[2px]"},Ct={class:"[&_td]:pt-[3mm]"},Nt=t("td",null,null,-1),St=t("td",null,null,-1),qt=t("td",null,null,-1),Rt=t("td",null,null,-1),Mt=t("td",{colspan:"2"},[t("span",{class:"font-bold"},"Summe")],-1),Tt={class:"block text-right font-bold font-mono text-[8pt] pt-[2px]"},At={key:0,class:"mt-2"},Et=t("p",null,"Es wird gemäß §19 Abs. 1 Umsatzsteuergesetz keine Umsatzsteuer erhoben.",-1),Pt=[Et],Ut=_({__name:"InvoiceBody",props:{userData:null,invoice:null},setup(e){return(r,m)=>(o(),c("div",xt,[t("div",Dt,[t("table",$t,[yt,t("tbody",null,[(o(!0),c(u,null,R(e.invoice.invoice_position,(s,d)=>(o(),c("tr",{class:"[&:nth-child(2n+1)]:bg-slate-50",key:s.id},[t("td",null,[t("span",gt,n(d+1),1)]),t("td",null,[t("span",kt,n(l(k)(new Date(s.service_date))),1)]),t("td",wt,[t("span",It,n(s.description),1)]),t("td",pt,n(l(N)(s.quantity,s.unit_quantity)),1),t("td",null,n(l(S)(s.quantity,s.unit_quantity)),1),t("td",null,[t("span",Bt,n(l(x)(s.price_per_quantity))+"/"+n(s.unit_quantity),1)]),t("td",null,[t("span",zt,n(l(x)(s.price)),1)])]))),128)),t("tr",Ct,[Nt,St,qt,Rt,Mt,t("td",null,[t("span",Tt,n(l(x)(e.invoice.invoice_position.reduce((s,d)=>s+d.price,0)||0)),1)])])])])]),e.userData.no_sales_tax?(o(),c("div",At,Pt)):i("",!0)]))}}),Vt={class:"border-t border-t-black text-[10px] mt-[12mm] pl-[25mm] pr-[20mm] pt-[1mm] flex justify-between"},jt={class:"fuss-anschrift"},Ft={class:"font-normal"},Kt=t("br",null,null,-1),Lt=t("br",null,null,-1),Ht=t("br",null,null,-1),Qt={class:"fuss-bankverbindung"},Yt=t("br",null,null,-1),Zt=t("br",null,null,-1),Gt=t("br",null,null,-1),Jt={class:"fuss-finanzamt"},Ot=t("br",null,null,-1),Wt=_({__name:"InvoiceFooter",props:{userData:null},setup(e){return(r,m)=>(o(),c("div",Vt,[t("div",jt,[t("p",null,[t("span",Ft,n(e.userData.company_name),1),Kt,a(" (Inh. "+n(e.userData.name)+") ",1),Lt,a(" "+n(e.userData.street)+" ",1),Ht,a(" "+n(e.userData.zip)+" "+n(e.userData.city),1)])]),t("div",Qt,[t("p",null,[e.userData.bank_name?(o(),c(u,{key:0},[a(n(e.userData.bank_name)+" ",1),Yt],64)):i("",!0),e.userData.bank_account_holder?(o(),c(u,{key:1},[a(" Kontoinhaber: "+n(e.userData.bank_account_holder)+" ",1),Zt],64)):i("",!0),e.userData.bank_iban?(o(),c(u,{key:2},[a(" IBAN: "+n(e.userData.bank_iban)+" ",1),Gt],64)):i("",!0),e.userData.bank_bic?(o(),c(u,{key:3},[a("BIC: "+n(e.userData.bank_bic),1)],64)):i("",!0)])]),t("div",Jt,[t("p",null,[e.userData.tax_id?(o(),c(u,{key:0},[a(" Steuer Nummer: "+n(e.userData.tax_id)+" ",1),Ot],64)):i("",!0),e.userData.tax_office?(o(),c(u,{key:1},[a(n(e.userData.tax_office),1)],64)):i("",!0)])])]))}}),Xt="/invoice-tool/assets/DIN_5008_Form_B-d3b6b522.svg",te=t("div",{class:"h-8 print:hidden"},null,-1),ee=_({__name:"InvoicePageContainer",setup(e){const{b:r}=M(),m=E(),{invoiceId:s}=m.currentRoute.value.params;return(d,b)=>(o(),c(u,null,[t("div",{class:"mx-auto w-[209.99mm] h-[296.86mm] relative text-[12px] border shadow-2xl print:shadow-none print:border-none my-8 print:my-0 bg-contain bg-opacity-50 font-[200]",style:A({backgroundImage:l(r)?`url(${l(Xt)})`:""})},[T(d.$slots,"default")],4),te,f(L,{class:"fixed left-8 top-8 print:hidden",onClick:b[0]||(b[0]=v=>l(m).push(`/invoice/${l(s)}`))},{default:w(()=>[f(l(P),{class:"w-4"})]),_:1})],64))}}),ne=_({__name:"InvoiceMain",props:{userData:null,invoice:null,customer:null},setup(e){const r=e;return(m,s)=>(o(),I(ee,null,{default:w(()=>[f(vt,D($(r)),null,16),f(Ut,D($(r)),null,16),f(Wt,D($(r)),null,16)]),_:1}))}}),ue=_({__name:"InvoicePrintView",props:{invoiceId:null},setup(e){const r=e,{invoiceId:m}=U(r),{data:s}=q(m),{data:d}=B(g(()=>{var h;return(h=s.value)==null?void 0:h.customer_id})),{data:b}=V(),v=g(()=>!s.value||!d.value?"":`${s.value.invoice_number} - ${d.value.name}`),y=j(),p=y.value||"";return F(()=>{const h=document.querySelector("title");h&&(h.textContent=p)}),K(v,()=>{y.value=v.value},{immediate:!0}),(h,se)=>l(s)&&l(b)&&l(d)?(o(),I(ne,{key:0,invoice:l(s),customer:l(d),"user-data":l(b)},null,8,["invoice","customer","user-data"])):i("",!0)}});export{ue as default};
