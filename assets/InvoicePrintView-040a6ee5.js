import{r as q,G as T,y as G,b as r,M,d as k,o as h,c as v,f as t,t as o,l as m,F as g,e as x,ah as ae,af as oe,a8 as H,i as le,a9 as re,aa as ie,ab as B,ac as ue,ai as ce,g as S,j as J,ag as de,aj as me,v as Y,ak as R,al as N,n as fe,p as _e,u as he,am as ve}from"./index-c0461d2d.js";import{a as be}from"./useInvoice-3f4416c8.js";import{n as Z,r as ye,i as X,a as ee,b as te,t as ne,c as F,d as ge,e as xe}from"./index-834d5479.js";import{_ as pe}from"./BaseButton.vue_vue_type_script_setup_true_lang-099feaf5.js";function se(e){var s;const a=te(e);return(s=a==null?void 0:a.$el)!=null?s:a}const L=X?window:void 0,we=X?window.document:void 0;function C(...e){let s,a,n,l;if(ee(e[0])||Array.isArray(e[0])?([a,n,l]=e,s=L):[s,a,n,l]=e,!s)return Z;Array.isArray(a)||(a=[a]),Array.isArray(n)||(n=[n]);const f=[],u=()=>{f.forEach(b=>b()),f.length=0},y=(b,p,w,D)=>(b.addEventListener(p,w,D),()=>b.removeEventListener(p,w,D)),i=M(()=>[se(s),te(l)],([b,p])=>{u(),b&&f.push(...a.flatMap(w=>n.map(D=>y(b,w,D,p))))},{immediate:!0,flush:"post"}),c=()=>{i(),u()};return ne(c),c}function De(e,s=!1){const a=G(),n=()=>a.value=Boolean(e());return n(),xe(n,s),a}const j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},A="__vueuse_ssr_handlers__";j[A]=j[A]||{};j[A];const $e={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function Oe(e={}){const{reactive:s=!1,target:a=L,aliasMap:n=$e,passive:l=!0,onEventFired:f=Z}=e,u=q(new Set),y={toJSON(){return{}},current:u},i=s?q(y):y,c=new Set,b=new Set;function p(_,d){_ in i&&(s?i[_]=d:i[_].value=d)}function w(){u.clear();for(const _ of b)p(_,!1)}function D(_,d){var I,E;const $=(I=_.key)==null?void 0:I.toLowerCase(),Q=[(E=_.code)==null?void 0:E.toLowerCase(),$].filter(Boolean);$&&(d?u.add($):u.delete($));for(const O of Q)b.add(O),p(O,d);$==="meta"&&!d?(c.forEach(O=>{u.delete(O),p(O,!1)}),c.clear()):typeof _.getModifierState=="function"&&_.getModifierState("Meta")&&d&&[...u,...Q].forEach(O=>c.add(O))}C(a,"keydown",_=>(D(_,!0),f(_)),{passive:l}),C(a,"keyup",_=>(D(_,!1),f(_)),{passive:l}),C("blur",w,{passive:!0}),C("focus",w,{passive:!0});const z=new Proxy(i,{get(_,d,I){if(typeof d!="string")return Reflect.get(_,d,I);if(d=d.toLowerCase(),d in n&&(d=n[d]),!(d in i))if(/[+_-]/.test(d)){const $=d.split(/[+_-]/g).map(P=>P.trim());i[d]=T(()=>$.every(P=>r(z[P])))}else i[d]=G(!1);const E=Reflect.get(_,d,I);return s?r(E):E}});return z}var U=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,Ee=(e,s)=>{var a={};for(var n in e)ke.call(e,n)&&s.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&U)for(var n of U(e))s.indexOf(n)<0&&Ie.call(e,n)&&(a[n]=e[n]);return a};function Se(e,s,a={}){const n=a,{window:l=L}=n,f=Ee(n,["window"]);let u;const y=De(()=>l&&"MutationObserver"in l),i=()=>{u&&(u.disconnect(),u=void 0)},c=M(()=>se(e),p=>{i(),y.value&&l&&p&&(u=new MutationObserver(s),u.observe(p,f))},{immediate:!0}),b=()=>{i(),c()};return ne(b),{isSupported:y,stop:b}}var K;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(K||(K={}));function Pe(e=null,s={}){var a,n;const{document:l=we}=s,f=ye((a=e??(l==null?void 0:l.title))!=null?a:null),u=e&&F(e);function y(i){if(!("titleTemplate"in s))return i;const c=s.titleTemplate||"%s";return F(c)?c(i):r(c).replace(/%s/g,i)}return M(f,(i,c)=>{i!==c&&l&&(l.title=y(ee(i)?i:""))},{immediate:!0}),s.observe&&!s.titleTemplate&&l&&!u&&Se((n=l.head)==null?void 0:n.querySelector("title"),()=>{l&&l.title!==f.value&&(f.value=y(l.title))},{childList:!0}),f}var Ce=Object.defineProperty,V=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,W=(e,s,a)=>s in e?Ce(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,Re=(e,s)=>{for(var a in s||(s={}))Me.call(s,a)&&W(e,a,s[a]);if(V)for(var a of V(s))Be.call(s,a)&&W(e,a,s[a]);return e};const Ne={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Re({linear:ge},Ne);const Te={class:"pt-[45mm] pl-[20mm]"},je={class:"flex justify-between"},Ae={class:"w-[85mm] pl-[5mm] mb-[8.46mm]"},Le={class:"text-[10px] underline h-[17.7mm] pt-[14.4mm] align-bottom"},ze={class:"h-[27.3mm]"},Qe=t("br",null,null,-1),qe=t("br",null,null,-1),Fe=t("br",null,null,-1),Ue={class:"mr-[20mm] text-right"},Ke={class:"mb-2"},Ve={class:"font-bold"},We=t("br",null,null,-1),Ge=t("br",null,null,-1),He=t("br",null,null,-1),Je={class:"kommunikation"},Ye=t("br",null,null,-1),Ze=t("br",null,null,-1),Xe=t("br",null,null,-1),et={class:"flex justify-between"},tt={class:"ml-[5mm]"},nt={class:"text-xl mb-2"},st={class:"text-sm mb-2"},at=t("p",null,"Bitte bei Zahlungen und Schriftverkehr angeben.",-1),ot={class:"mr-[20mm] text-right"},lt=t("br",null,null,-1),rt=t("br",null,null,-1),it=k({__name:"InvoiceHeader",props:{userData:null,invoice:null,customer:null},setup(e){return(s,a)=>(h(),v("div",Te,[t("div",je,[t("div",Ae,[t("p",Le,o(e.userData.name)+" - "+o(e.userData.street)+" - "+o(e.userData.zip)+" "+o(e.userData.city),1),t("p",ze,[m(o(e.customer.name)+" ",1),Qe,e.customer.name_additional?(h(),v(g,{key:0},[m(o(e.customer.name_additional)+" ",1),qe],64)):x("",!0),m(" "+o(e.customer.street)+" ",1),Fe,m(" "+o(e.customer.zip)+" "+o(e.customer.city),1)])]),t("div",Ue,[t("p",Ke,[t("span",Ve,o(e.userData.company_name),1),We,m(" (Inh. "+o(e.userData.name)+") ",1),Ge,m(" "+o(e.userData.street)+" ",1),He,m(" "+o(e.userData.zip)+" "+o(e.userData.city),1)]),t("p",Je,[e.userData.tel?(h(),v(g,{key:0},[m(" Tel.: "+o(e.userData.tel)+" ",1),Ye],64)):x("",!0),e.userData.mobile?(h(),v(g,{key:1},[m(" Mobil: "+o(e.userData.mobile)+" ",1),Ze],64)):x("",!0),e.userData.email?(h(),v(g,{key:2},[m(" E-Mail: "+o(e.userData.email)+" ",1),Xe],64)):x("",!0)])])]),t("div",et,[t("div",tt,[t("h1",nt," Rechnung für "+o(r(ae)(new Date(r(oe)({month:e.invoice.for_month,year:e.invoice.for_year})))),1),t("h3",st,"Rechnung Nr. "+o(e.invoice.invoice_number),1),at]),t("div",ot,[t("p",null,[m(" Rechnungsdatum: "+o(r(H)(new Date(e.invoice.created_at||"")))+" ",1),lt,m(" Kundennummer: "+o(e.customer.id)+" ",1),rt])])])]))}}),ut={class:"ml-[25mm] mr-[20mm] h-[135mm]"},ct={class:"tabelle-leistungen"},dt={class:"w-full mt-4"},mt=t("thead",null,[t("tr",{class:"[&_th]:font-[400] text-left bg-slate-200"},[t("th",{class:"w-[20px] pr-1 text-right"},"#"),t("th",{class:"w-24"},"Leistungsdatum"),t("th",{class:"beschreibung"},"Beschreibung"),t("th",{class:"w-[70px] text-center pr-2",colspan:"2"},"Menge"),t("th",{class:"w-[97px]"},"Preis pro Einheit"),t("th",{class:"w-[50px] text-right"},"Betrag")])],-1),ft={class:"text-right block pr-1"},_t={class:"text-center block"},ht={class:"pr-2"},vt={class:""},bt={class:"text-right pr-2 font-mono text-[8pt] pt-[2px]"},yt={class:""},gt={class:"text-right block font-mono text-[8pt] pt-[2px]"},xt={class:"[&_td]:pt-[3mm]"},pt=t("td",null,null,-1),wt=t("td",null,null,-1),Dt=t("td",null,null,-1),$t=t("td",null,null,-1),Ot=t("td",{colspan:"2"},[t("span",{class:"font-bold"},"Summe")],-1),kt={class:"block text-right font-bold font-mono text-[8pt] pt-[2px]"},It={key:0,class:"mt-2"},Et=t("p",null,"Es wird gemäß §19 Abs. 1 Umsatzsteuergesetz keine Umsatzsteuer erhoben.",-1),St=[Et],Pt=k({__name:"InvoiceBody",props:{userData:null,invoice:null},setup(e){return(s,a)=>(h(),v("div",ut,[t("div",ct,[t("table",dt,[mt,t("tbody",null,[(h(!0),v(g,null,le(e.invoice.invoice_position,(n,l)=>(h(),v("tr",{class:"[&:nth-child(2n+1)]:bg-slate-50",key:n.id},[t("td",null,[t("span",ft,o(l+1),1)]),t("td",null,[t("span",_t,o(r(H)(new Date(n.service_date))),1)]),t("td",ht,[t("span",vt,o(n.description),1)]),t("td",bt,o(r(re)(n.quantity,n.unit_quantity)),1),t("td",null,o(r(ie)(n.quantity,n.unit_quantity)),1),t("td",null,[t("span",yt,o(r(B)(n.price_per_quantity))+"/"+o(n.unit_quantity),1)]),t("td",null,[t("span",gt,o(r(B)(n.price)),1)])]))),128)),t("tr",xt,[pt,wt,Dt,$t,Ot,t("td",null,[t("span",kt,o(r(B)(e.invoice.invoice_position.reduce((n,l)=>n+l.price,0)||0)),1)])])])])]),e.userData.no_sales_tax?(h(),v("div",It,St)):x("",!0)]))}}),Ct={class:"border-t border-t-black text-[10px] mt-[12mm] pl-[25mm] pr-[20mm] pt-[1mm] flex justify-between"},Mt={class:"fuss-anschrift"},Bt={class:"font-normal"},Rt=t("br",null,null,-1),Nt=t("br",null,null,-1),Tt=t("br",null,null,-1),jt={class:"fuss-bankverbindung"},At=t("br",null,null,-1),Lt=t("br",null,null,-1),zt=t("br",null,null,-1),Qt={class:"fuss-finanzamt"},qt=t("br",null,null,-1),Ft=k({__name:"InvoiceFooter",props:{userData:null},setup(e){return(s,a)=>(h(),v("div",Ct,[t("div",Mt,[t("p",null,[t("span",Bt,o(e.userData.company_name),1),Rt,m(" (Inh. "+o(e.userData.name)+") ",1),Nt,m(" "+o(e.userData.street)+" ",1),Tt,m(" "+o(e.userData.zip)+" "+o(e.userData.city),1)])]),t("div",jt,[t("p",null,[e.userData.bank_name?(h(),v(g,{key:0},[m(o(e.userData.bank_name)+" ",1),At],64)):x("",!0),e.userData.bank_account_holder?(h(),v(g,{key:1},[m(" Kontoinhaber: "+o(e.userData.bank_account_holder)+" ",1),Lt],64)):x("",!0),e.userData.bank_iban?(h(),v(g,{key:2},[m(" IBAN: "+o(e.userData.bank_iban)+" ",1),zt],64)):x("",!0),e.userData.bank_bic?(h(),v(g,{key:3},[m("BIC: "+o(e.userData.bank_bic),1)],64)):x("",!0)])]),t("div",Qt,[t("p",null,[e.userData.tax_id?(h(),v(g,{key:0},[m(" Steuer Nummer: "+o(e.userData.tax_id)+" ",1),qt],64)):x("",!0),e.userData.tax_office?(h(),v(g,{key:1},[m(o(e.userData.tax_office),1)],64)):x("",!0)])])]))}}),Ut="/invoice-tool/assets/DIN_5008_Form_B-d3b6b522.svg",Kt=t("div",{class:"h-8 print:hidden"},null,-1),Vt=k({__name:"InvoicePageContainer",setup(e){const{b:s}=Oe(),a=de(),{invoiceId:n}=a.currentRoute.value.params;return(l,f)=>(h(),v(g,null,[t("div",{class:"mx-auto w-[209.99mm] h-[296.86mm] relative text-[12px] border shadow-2xl print:shadow-none print:border-none my-8 print:my-0 bg-contain bg-opacity-50 font-[200]",style:ce({backgroundImage:r(s)?`url(${r(Ut)})`:""})},[ue(l.$slots,"default")],4),Kt,S(pe,{class:"fixed left-8 top-8 print:hidden",onClick:f[0]||(f[0]=u=>r(a).push(`/invoice/${r(n)}`))},{default:J(()=>[S(r(me),{class:"w-4"})]),_:1})],64))}}),Wt=k({__name:"InvoiceMain",props:{userData:null,invoice:null,customer:null},setup(e){const s=e;return(a,n)=>(h(),Y(Vt,null,{default:J(()=>[S(it,R(N(s)),null,16),S(Pt,R(N(s)),null,16),S(Ft,R(N(s)),null,16)]),_:1}))}}),Zt=k({__name:"InvoicePrintView",props:{invoiceId:null},setup(e){const s=e,{invoiceId:a}=fe(s),{data:n}=be(a),{data:l}=_e(T(()=>{var c;return(c=n.value)==null?void 0:c.customer_id})),{data:f}=he(),u=T(()=>!n.value||!l.value?"":`${n.value.invoice_number} - ${l.value.name}`),y=Pe(),i=y.value||"";return ve(()=>{const c=document.querySelector("title");c&&(c.textContent=i)}),M(u,()=>{y.value=u.value},{immediate:!0}),(c,b)=>r(n)&&r(f)&&r(l)?(h(),Y(Wt,{key:0,invoice:r(n),customer:r(l),"user-data":r(f)},null,8,["invoice","customer","user-data"])):x("",!0)}});export{Zt as default};
